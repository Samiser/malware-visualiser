# install python3.6
sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt update
sudo apt install python3.6
sudo apt install python3.6-venv

# create and activate a virtual env for the project
python3.6 -m venv ../vima-env
source ../vima-env/bin/activate

# install dependencies to the env
pip install -r site/requirements.txt

# set up django project
echo "change_this_for_prod" > site/secret_key.txt
(cd site && python manage.py migrate)

# install nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.2/install.sh | bash
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm

# install node
nvm install node

# set up project
npm install
npm run build
